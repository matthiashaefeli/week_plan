<div class="mf_home">
  <div><%= link_to 'Add New Measure', new_measure_path, onclick: "create_measure(event, $(this))" %></div>
  <div><input id="measureSearch" type="text" placeholder="Search..."></div>
  <div class="mf_container">
    <% @measures.each do |m| %>
      <p class="measure_search"><%= m.name %></p>
    <% end %>
  </div>
</div>
<script>
  function create_measure(event, link) {
    event.preventDefault();
    let parent = link.parent();
    $('#measureCreate').remove();
    $.ajax({
      url: '/measures/new',
      method: 'get',
      success: function(response) {
        $(response).insertAfter(parent);
      }
    })
  }

  $('#measureSearch').focus();
  $('#measureSearch').on('keyup', function() {
    let val = $(this).val().toLowerCase();
    $('.measure_search').filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(val) > -1)
    })
  })
</script>