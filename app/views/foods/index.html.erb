<div class="mf_home">
  <div><%= link_to 'Add New Ingredient', new_food_path, onclick: "create_food(event, $(this))" %></div>
  <div><input id="foodSearch" type="text" placeholder="Search..."></div>
  <div class="mf_container">
    <% @foods.each do |f| %>
      <p class="food_search"><%= f.name %></p>
    <% end %>
  </div>
</div>
<script>
  function create_food(event, link) {
    event.preventDefault();
    let parent = link.parent();
    $('#foodCreate').remove();
    $.ajax({
      url: '/foods/new',
      method: 'get',
      success: function(response) {
        $(response).insertAfter(parent);
      }
    })
  }

  $('#foodSearch').focus();
  $('#foodSearch').on('keyup', function() {
    let val = $(this).val().toLowerCase();
    $('.food_search').filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(val) > -1)
    })
  })
</script>